{% extends 'base.html' %}

{% block content %}
<style>
  .dataTables_filter {
    text-align: right;
  }
</style>
<div class="container mt-4">
  <h1 class="text-center">NC Table</h1>
  {% if permits %}
  <table id="nc24" class="table table-striped table-bordered nowrap" style="width:1400px; text-align: center;">
    <thead>
      <tr>
        <th>Permit Number</th>
        <th>Parcel Number</th>
        <th>Block</th>
        <th>KW</th>
        <th>KVA</th>
        <th>Plan Engineer</th>
        <th>Plan Status</th>
        <th>Passed Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for permit in permits %}
      <tr>
        <td>{{ permit.Number }}</td>
        <td>{{ permit.parcel_number }}</td>
        <td>{{ permit.block }}</td>
        <td>{{ permit.kw }}</td>
        <td>{{ permit.kva }}</td>
        <td>{{ permit.planeng }}</td>
        <td>{{ permit.plan_status }}</td>
        <td>{{ permit.passed_date }}</td>

        <td style="width: 300px;">
          <button class="btn btn-sm btn-primary me-1">
            <i class="fas fa-eye"></i> View
          </button>
          <button class="btn btn-sm btn-warning me-1">
            <i class="fas fa-edit"></i> Edit
          </button>
          {% if is_admin %}
          <form action="{% url 'delete_depot24' permit.id %}" method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger"
              onclick="return confirm('Are you sure you want to delete this scheme?');">
              <i class="fas fa-trash"></i> Delete
            </button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <h1>No Data Available</h1>
  {% endif %}
</div>


<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/datatables.net@2.2.2/js/dataTables.min.js"></script>
<script src="https://cdn.datatables.net/2.2.2/js/dataTables.bootstrap5.min.js"></script>
<script>
  $(document).ready(function () {
    var table = $('#nc24').DataTable({});
  });
</script>
{% endblock %}